{% extends "__base.html" %}
{% load staticfiles %}

{% block content %}
	<link rel="stylesheet" href="{% static 'network/css/network.css' %}">
	<div class="container-fluid text-center">
		<div class="row content">
			<div class="col-sm-2 sidenav">
				<table>
					<tr>
						<td><a href="{% url 'mgs' campus.mgs.id %}">{{ campus.mgs }}</a></td>
						<td></td>
					</tr>
					{% for cmps in campus.mgs.campus_set.all %}
						<tr {% if cmps == campus%}bgcolor="#cccccc"{%endif%}>
							<td></td>
							<td><a href="{% url 'campus' cmps.id %}">{{ cmps }}</td>
						</tr>
					{% endfor %}
				</table>
			</div>
			<div class="col-sm-8 text-left">
				<h1>{{ campus.title }} </h1>
				<div class = "container table-responsive">
					<table class="table table-bordered">
						<tr>
							<th>Нитка (outvlan/mapvlan)</td>
							<th>Адреса</td>
						</tr>
						{% for thread in campus.thread_set.all %}
							<tr>
								<td rowspan="2" valign="top"><a href = "{% url 'thread' thread.id %}">{{ thread }}</a><br>
								{{ thread.outvlan }}/{{ thread.mapvlan }}</td>
								<td>nets:
								{% for subnet in thread.subnet_set.all %}{{ subnet.network }}/{{ subnet.mask }}; 
								{% endfor %} <a href="#"><span class="glyphicon glyphicon-plus" title="Добавить подсеть в нитку"></span></a>
								</td>
							</tr>
							<tr>
								<td>
									<div class = "container table-responsive">
										<table class="table table-striped">
										{% for access_node in thread.access_node_set.all %}
											<thead>
												<tr>
													<th colspan = "2"> {{ access_node.address }}</th>
												<tr>
											</thead>
											{% for access_switch in access_node.access_switch_set.all %}
												<tr>
													<td>{{ access_switch.ip }}</td>
													<td>{{ access_switch.sw_model }}</td>
												</tr>
											{% endfor %}
												<tr>
													<td>
														<a href="#"><span class="glyphicon glyphicon-plus" title="Добавить коммутатор для [{{ access_node.address }}]"></span></a>
													</td>
													<td></td>
												</tr>
										{% endfor %}
											<tr>
												<td colspan = "2">
													<a href="#"><span class="glyphicon glyphicon-plus" title="Добавить узел"></span></a>
												</td>
											</tr>
										</table>
									</div>
								</td>
							</tr>
						{% endfor %}
						<tr>
							<td>
								<a href="#"><span class="glyphicon glyphicon-plus" title="Добавить нитку"></span></a>
							</td>
							<td>
							</td>
						</tr>
					</table>
				</div>
			</div>
			<div class="col-sm-2 sidenav">
				<div class="well">
					<p>ADS</p>
				</div>
			</div>
		</div>
	</div>
{% endblock %}





<h1>{{ campus.title }}</h1>

